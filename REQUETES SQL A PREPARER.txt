/* REQUETES SQL A PREPARER */

/* ACTUALITÉS */

/* 1 */ 
SELECT ACTUALITE_titre, ACTUALITE_description, ACTUALITE_date, LTQCLAC_id FROM `ACTUALITE` LEFT JOIN LATABLEQUICONTIENTLESADMINISTRATEURSCOOLS USING(LTQCLAC_id);

/* 2 */
SELECT ACTUALITE_titre, ACTUALITE_description, ACTUALITE_date FROM `ACTUALITE` WHERE ACTUALITE_id = 1;

/* 3 */
SELECT ACTUALITE_titre, ACTUALITE_description, ACTUALITE_date FROM `ACTUALITE` WHERE 1 ORDER BY ACTUALITE_date DESC LIMIT 5;

/* 4 */
SELECT ACTUALITE_titre, ACTUALITE_description, ACTUALITE_date FROM `ACTUALITE` WHERE ACTUALITE_description LIKE "%événement%" or ACTUALITE_titre LIKE "%événement%";

/* 5 */
SELECT ACTUALITE_titre, ACTUALITE_description, ACTUALITE_date, LTQCLAC_login FROM `ACTUALITE` LEFT JOIN LATABLEQUICONTIENTLESADMINISTRATEURSCOOLS USING(LTQCLAC_id) WHERE ACTUALITE_date = "2019-08-20";

/* 6 */
insert into ACTUALITE(ACTUALITE_titre, ACTUALITE_description, ACTUALITE_date, LTQCLAC_id) values("Pascal le tête en l'air", "Pascal a encore fait n'importe quoi. Pour s'excuser, il propose de nouveaux goodies sur sa personne.", "2019-09-26", 1);
insert into ACTUALITE_SE_REFERE_A_ORIGINAL(ACTUALITE_id, ORIGINAL_id) values(3,2);

/* 7 */

SELECT ACTUALITE_titre, ACTUALITE_description, ACTUALITE_date, LTQCLAC_login FROM `ACTUALITE` LEFT JOIN LATABLEQUICONTIENTLESADMINISTRATEURSCOOLS USING(LTQCLAC_id) WHERE LTQCLAC_id=1;

/* 8 */

SELECT COUNT(*) FROM ACTUALITE WHERE ACTUALITE_date > "2019-09-01";

/* 9 */

UPDATE ACTUALITE
SET ACTUALITE_titre = 'Pascal est tête en l\'air'
WHERE ACTUALITE_id = 3;

/* 10 */

DELETE FROM ACTUALITE_SE_REFERE_A_ORIGINAL WHERE ACTUALITE_id = 3;
DELETE FROM ACTUALITE WHERE ACTUALITE_id = 3;

/* 11 */

DELETE FROM ACTUALITE_SE_REFERE_A_ORIGINAL WHERE ACTUALITE_id IN (SELECT ACTUALITE_id FROM ACTUALITE left JOIN LATABLEQUICONTIENTLESADMINISTRATEURSCOOLS USING(LTQCLAC_id) where LTQCLAC_id = 1);
DELETE FROM ACTUALITE WHERE LTQCLAC_id = 1;



/* ORIGINAUX / CATÉGORIES */

/* 1 */

SELECT ORIGINAL_titre, ORIGINAL_description FROM `ORIGINAL`;

/* 2 */

SELECT ORIGINAL_titre, ORIGINAL_description FROM `ORIGINAL` ORDER BY CATEGORIE_id;

/* 3 */

SELECT ORIGINAL_titre, ORIGINAL_description, GOODIE_nom, GOODIE_description FROM `ORIGINAL` LEFT JOIN ORIGINAL_CONTIENT_GOODIES USING(ORIGINAL_id) LEFT JOIN GOODIE USING(GOODIE_id);

/* 4 */

SELECT ORIGINAL_titre, ORIGINAL_description, GOODIE_nom, GOODIE_description FROM `ORIGINAL` WHERE CATEGORIE_id = 1;

/* 5 */

SELECT CATEGORIE_nom, ORIGINAL_titre, ORIGINAL_description FROM `ORIGINAL` LEFT JOIN CATEGORIE USING(CATEGORIE_id) ORDER BY CATEGORIE_nom;

/* 6 */

SELECT ORIGINAL_titre, ORIGINAL_description FROM `ORIGINAL` LEFT JOIN CATEGORIE USING(CATEGORIE_id) WHERE CATEGORIE_nom = "Princesses Disney officielles";

/* 7 */

SELECT ORIGINAL_titre, ORIGINAL_description FROM `ORIGINAL`
LEFT JOIN ORIGINAL_CONTIENT_GOODIES USING (ORIGINAL_id)
WHERE (SELECT COUNT(*) FROM ORIGINAL_CONTIENT_GOODIES WHERE ORIGINAL_id = 1) > 1 GROUP BY ORIGINAL_titre;

/* 8 */

SELECT ORIGINAL_titre, CATEGORIE_nom, GOODIE_nom, GOODIE_TYPE_nom FROM ORIGINAL
LEFT JOIN CATEGORIE USING(CATEGORIE_id)
LEFT JOIN ORIGINAL_CONTIENT_GOODIES USING(ORIGINAL_id)
LEFT JOIN GOODIE USING(GOODIE_id)
LEFT JOIN GOODIE_TYPE USING(GOODIE_type_id);

/* 9 */

SELECT LTQCLAC_id, ORIGINAL_titre, CATEGORIE_id FROM LATABLEQUICONTIENTLESADMINISTRATEURSCOOLS
LEFT JOIN ORIGINAL USING(LTQCLAC_id)
LEFT JOIN CATEGORIE USING(CATEGORIE_id);

/* 10 */

SELECT ORIGINAL_titre FROM ORIGINAL WHERE LTQCLAC_id IS NULL;

/* 11 */

SELECT ORIGINAL_titre, CATEGORIE_nom, GOODIE_nom FROM ORIGINAL
LEFT JOIN CATEGORIE USING(CATEGORIE_id)
LEFT JOIN ORIGINAL_CONTIENT_GOODIES USING(ORIGINAL_id)
LEFT JOIN GOODIE USING(GOODIE_id)
WHERE LTQCLAC_id = 1;

/* 12 */

SELECT CATEGORIE_nom FROM CATEGORIE
LEFT JOIN ORIGINAL USING(CATEGORIE_id)
WHERE ORIGINAL_titre = "Vaiana";

/* 13 */

/*FOR TEST
DELETE FROM `GOODIE` WHERE GOODIE_id = 1;*/
insert into GOODIE(GOODIE_nom, GOODIE_nb_en_stock, GOODIE_description, GOODIE_nom_image, GOODIE_prix, GOODIE_type_id) values("Poster Raiponce", 2, "Poster de Raiponce", "raiponce-Poster", 15.00, 3);

/* 14 */



/* 15 */
/* 16 */
/* 17 */
/* 18 */
/* 19 */
/* 20 */


/* GOODIES / TYPE */

/* 1 */

SELECT GOODIE_nom FROM `GOODIE`;

/* 2 */

SELECT GOODIE_nom, GOODIE_TYPE_nom FROM `GOODIE`
LEFT JOIN GOODIE_TYPE USING(GOODIE_TYPE_id);

/* 3 */

SELECT GOODIE_nom, GOODIE_nb_en_stock, GOODIE_description, GOODIE_prix, GOODIE_TYPE_nom FROM `GOODIE` 
LEFT JOIN GOODIE_TYPE USING(GOODIE_TYPE_id)
WHERE GOODIE_nom = "Poster Raiponce";

/* 4 */

SELECT COUNT(*) FROM GOODIE;

/* 5 */

SELECT GOODIE_nom FROM GOODIE
LEFT JOIN ORIGINAL_CONTIENT_GOODIES USING(GOODIE_id)
LEFT JOIN ORIGINAL USING(ORIGINAL_id)
WHERE ORIGINAL_titre = "Raiponce";

/* 6 */

SELECT GOODIE_prix FROM GOODIE
WHERE GOODIE_nom = "Poster Raiponce";

/* 7 */

SELECT GOODIE_nb_en_stock FROM GOODIE
WHERE GOODIE_nom = "Poster Raiponce";

/* 8 */

SELECT GOODIE_nom FROM GOODIE
WHERE GOODIE_nb_en_stock = 0;

/* 9 */

SELECT GOODIE_id, GOODIE_nom
FROM original_contient_goodies
INNER JOIN
goodie USING (GOODIE_id)
GROUP BY GOODIE_id
HAVING COUNT(ORIGINAL_id) = 1;

/* 10 */

SELECT GOODIE_TYPE_nom from GOODIE_TYPE
LEFT JOIN GOODIE USING(GOODIE_TYPE_id)
WHERE GOODIE_nom = "Poster Raiponce";

/* 11 */

SELECT GOODIE_TYPE_nom, GOODIE_nom from GOODIE_TYPE
LEFT JOIN GOODIE USING(GOODIE_TYPE_id);

/* 12 */

SELECT GOODIE_TYPE_nom, GOODIE_nom from GOODIE_TYPE
LEFT JOIN GOODIE USING(GOODIE_TYPE_id)
WHERE GOODIE_TYPE_nom = 'Poster';

/* 13 */

SELECT GOODIE_nom FROM `ORIGINAL`
LEFT JOIN ORIGINAL_CONTIENT_GOODIES USING (ORIGINAL_id)
LEFT JOIN GOODIE USING(GOODIE_id)
WHERE (SELECT COUNT(*) FROM ORIGINAL_CONTIENT_GOODIES WHERE ORIGINAL_id = 1) > 1 GROUP BY GOODIE_nom;

/* 14 */

UPDATE GOODIE SET GOODIE_nb_en_stock = GOODIE_nb_en_stock + 3 WHERE GOODIE_id = 1;

/* 15 */

UPDATE GOODIE SET GOODIE_nb_en_stock = GOODIE_nb_en_stock - 2 WHERE GOODIE_id = 1;

/* 16 */
/* 17 */
/* 18 */
/* 19 */
/* 20 */
/* 21 */
/* 22 */
/* 23 */


/* ADMINISTRATEURS / VENDEURS */

/* 1 */
/* 2 */
/* 3 */
/* 4 */
/* 5 */
/* 6 */
/* 7 */
/* 8 */
/* 9 */
/* 10 */

/* POINT DE RETRAIT */

/* 1 */

SELECT * FROM `point_retrait`;

/* COMMANDE / PANIER */

/* 1 */

SELECT SUM(GOODIE_prix) FROM `commande` LEFT JOIN commande_contient_goodies USING(COMMANDE_id) LEFT JOIN GOODIE USING(GOODIE_id) WHERE COMMANDE_id = 1;

/* 2 */

SELECT COUNT(GOODIE_prix) FROM `commande` LEFT JOIN commande_contient_goodies USING(COMMANDE_id) LEFT JOIN GOODIE USING(GOODIE_id) WHERE COMMANDE_id = 1;

/* 3 */

insert into COMMANDE(COMMANDE_code, COMMANDE_etat, COMMANDE_date, POINT_RETRAIT_id, CLIENT_id) values ("csaJDcAwqdWByirhJMCJeRVuMmnqbLfhvBSnwLSzCPYHpZVaUhaXqfPvNGJw", "a", "2019-10-01", 4, 1);
insert into COMMANDE_CONTIENT_GOODIES(COMMANDE_id, GOODIE_id, CCG_quantite) values(2, 4, 1);
insert into COMMANDE_CONTIENT_GOODIES(COMMANDE_id, GOODIE_id, CCG_quantite) values(2, 6, 2);
insert into COMMANDE_CONTIENT_GOODIES(COMMANDE_id, GOODIE_id, CCG_quantite) values(2, 2, 1);

/* 4 */

LOL

/* 5 */

SELECT * FROM `COMMANDE` WHERE COMMANDE_code = "ZrDzdBMNpCBTXPCkyKHDrksHnYfBrbAjvsinpqUukTCYhTYuPeKnGvEkSRmb";

/* 6 */
/* 7 */
/* 8 */
/* 9 */
/* 10 */
/* 11 */
/* 12 */
/* 13 */













